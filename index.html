<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Asisten Keuangan Gusti</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Courier+Prime&family=Inter:wght@400;700;800&display=swap");

      body {
        background-color: #f8fafc;
        font-family: "Inter", sans-serif;
      }
      .card {
        background: white;
        border-radius: 20px;
        padding: 24px;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05);
      }

      /* GAYA STRUK KASIR (PRINT MODE) */
      @media print {
        body {
          background: white;
          padding: 0;
          margin: 0;
        }
        .no-print {
          display: none !important;
        }

        #area-struk {
          display: block !important;
          width: 80mm;
          padding: 4mm;
          font-family: "Courier Prime", monospace;
          color: black;
        }

        table {
          width: 100%;
          border-collapse: collapse;
          margin: 10px 0;
        }
        th {
          border-bottom: 1px dashed black;
          text-align: left;
          font-size: 10px;
          padding: 5px 0;
        }
        td {
          font-size: 10px;
          padding: 3px 0;
          vertical-align: top;
        }

        .garis {
          border-top: 1px dashed black;
          margin: 5px 0;
        }
        .pusat {
          text-align: center;
        }
        .kanan {
          text-align: right;
        }
      }

      .hidden-struk {
        display: none;
      }

      /* Animasi Gradient untuk Judul */
      .text-gradient {
        background: linear-gradient(to right, #4f46e5, #9333ea, #2563eb);
        background-clip: text; /* Standar modern */
        -webkit-background-clip: text; /* Untuk Chrome, Safari, Edge */
        -webkit-text-fill-color: transparent; /* Untuk Chrome, Safari, Edge */
        color: transparent; /* Fallback jika gradasi gagal */
        display: inline-block; /* Memastikan background membungkus teks dengan pas */
      }
    </style>
  </head>
  <body class="p-4">
    <div class="max-w-md mx-auto">
      <div class="no-print">
        <header class="mt-6 mb-8 text-center relative">
          <div
            class="absolute inset-x-0 top-0 h-24 bg-indigo-50 blur-[60px] -z-10 rounded-full"
          ></div>
          <p
            class="text-[10px] uppercase tracking-[0.4em] text-indigo-400 font-bold mb-1"
          >
            Personal Finance
          </p>
          <h1 class="text-2xl font-extrabold tracking-tight">
            <span class="text-gradient">ðŸ’° ASISTEN KEUANGAN GUSTI</span>
          </h1>
          <div class="flex justify-center items-center gap-1 mt-3">
            <div class="h-1 w-10 bg-indigo-600 rounded-full"></div>
            <div class="h-1 w-2 bg-indigo-300 rounded-full"></div>
          </div>
        </header>

        <div
          class="card mb-6 bg-gradient-to-br from-indigo-600 to-purple-700 text-white shadow-xl shadow-indigo-200"
        >
          <p class="text-xs opacity-70 font-medium tracking-wide">
            TOTAL SALDO SAAT INI
          </p>
          <h2 id="total-saldo" class="text-3xl font-bold mt-1">Rp 0</h2>
        </div>

        <div class="card mb-6 border border-gray-100">
          <label
            class="text-[10px] font-bold text-gray-400 mb-1 block ml-1 uppercase"
            >Pilih Tanggal</label
          >
          <input
            type="date"
            id="tanggal"
            class="w-full border border-gray-200 p-3 rounded-xl mb-3 outline-none focus:ring-2 focus:ring-indigo-500 transition-all bg-gray-50"
          />
          <input
            type="text"
            id="keterangan"
            placeholder="Makan siang, Gaji, dll..."
            class="w-full border border-gray-200 p-3 rounded-xl mb-3 outline-none focus:ring-2 focus:ring-indigo-500 transition-all"
          />
          <input
            type="number"
            id="jumlah"
            placeholder="Jumlah (Rp)"
            class="w-full border border-gray-200 p-3 rounded-xl mb-3 outline-none focus:ring-2 focus:ring-indigo-500 transition-all"
          />
          <select
            id="jenis"
            class="w-full border border-gray-200 p-3 rounded-xl mb-4 bg-white outline-none focus:ring-2 focus:ring-indigo-500"
          >
            <option value="keluar">Pengeluaran (-)</option>
            <option value="masuk">Pemasukan (+)</option>
          </select>
          <button
            onclick="tambahData()"
            class="w-full bg-indigo-600 hover:bg-indigo-700 text-white py-4 rounded-2xl font-bold shadow-lg shadow-indigo-100 active:scale-95 transition-all uppercase tracking-widest text-sm"
          >
            Simpan Catatan
          </button>
        </div>

        <div class="card border border-gray-100">
          <div class="flex justify-between items-center mb-5">
            <h3
              class="font-extrabold text-gray-800 text-sm tracking-tighter uppercase"
            >
              Riwayat Transaksi
            </h3>
            <button
              onclick="window.print()"
              class="flex items-center gap-2 bg-gray-900 text-white px-4 py-2 rounded-xl text-[10px] font-bold hover:bg-black transition-all"
            >
              <span>PRINT STRUK</span>
            </button>
          </div>
          <div id="daftar-web" class="space-y-3"></div>
        </div>
      </div>

      <div id="area-struk" class="hidden-struk">
        <div class="pusat">
          <h2 style="margin: 0; font-size: 16px">GUSTI FINANCE</h2>
          <p style="font-size: 9px">Laporan Keuangan Pribadi</p>
          <p style="font-size: 9px" id="tgl-cetak"></p>
          <div class="garis"></div>
        </div>

        <table>
          <thead>
            <tr>
              <th style="width: 60%">DESKRIPSI</th>
              <th class="kanan" style="width: 40%">TOTAL</th>
            </tr>
          </thead>
          <tbody id="tabel-struk"></tbody>
        </table>

        <div class="garis"></div>
        <div
          style="
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            font-size: 12px;
          "
        >
          <span>SALDO AKHIR</span>
          <span id="total-struk"></span>
        </div>
        <div class="garis"></div>

        <div class="pusat" style="margin-top: 20px; font-size: 9px">
          <p>Tercatat secara digital</p>
          <p>*** TETAP DISIPLIN KEUANGAN YA GUSTI ***</p>
        </div>
      </div>
    </div>

    <script>
      document.getElementById("tanggal").valueAsDate = new Date();
      let data = JSON.parse(localStorage.getItem("keuangan")) || [];

      function render() {
        const webList = document.getElementById("daftar-web");
        const strukList = document.getElementById("tabel-struk");
        let total = 0;

        webList.innerHTML = "";
        strukList.innerHTML = "";

        data.sort((a, b) => new Date(b.tanggal) - new Date(a.tanggal));

        data.forEach((item, i) => {
          const isKeluar = item.jenis === "keluar";
          const nominal = item.jumlah.toLocaleString("id-ID");
          total += isKeluar ? -item.jumlah : item.jumlah;

          webList.innerHTML += `
            <div class="flex justify-between items-center bg-gray-50 p-4 rounded-2xl border border-gray-100 shadow-sm">
                <div>
                    <p class="font-bold text-sm text-gray-800">${
                      item.keterangan
                    }</p>
                    <p class="text-[10px] text-gray-400 font-medium">${
                      item.tanggal
                    }</p>
                </div>
                <div class="flex items-center gap-4">
                    <span class="${
                      isKeluar ? "text-red-500" : "text-emerald-600"
                    } font-bold text-sm">
                        ${isKeluar ? "-" : "+"} ${nominal}
                    </span>
                    <button onclick="hapus(${i})" class="text-gray-300 hover:text-red-400 transition-colors">
                        <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                    </button>
                </div>
            </div>`;

          strukList.innerHTML += `
            <tr>
                <td>${item.keterangan.toUpperCase()}<br><small>${
            item.tanggal
          }</small></td>
                <td class="kanan">${isKeluar ? "-" : ""}${nominal}</td>
            </tr>`;
        });

        document.getElementById(
          "total-saldo"
        ).innerText = `Rp ${total.toLocaleString("id-ID")}`;
        document.getElementById("total-struk").innerText =
          total.toLocaleString("id-ID");
        document.getElementById("tgl-cetak").innerText =
          new Date().toLocaleString("id-ID");
        localStorage.setItem("keuangan", JSON.stringify(data));
      }

      function tambahData() {
        const tgl = document.getElementById("tanggal").value;
        const ket = document.getElementById("keterangan").value;
        const jml = parseInt(document.getElementById("jumlah").value);
        const jns = document.getElementById("jenis").value;

        if (tgl && ket && jml) {
          data.push({ tanggal: tgl, keterangan: ket, jumlah: jml, jenis: jns });
          render();
          document.getElementById("keterangan").value = "";
          document.getElementById("jumlah").value = "";
        } else {
          alert("Gusti, isi semua datanya dulu ya!");
        }
      }

      function hapus(index) {
        if (confirm("Hapus catatan ini, Gusti?")) {
          data.splice(index, 1);
          render();
        }
      }

      render();
    </script>
  </body>
</html>
